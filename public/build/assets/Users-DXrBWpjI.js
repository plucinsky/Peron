import{d as K,r as V,u as z,e as p,f as a,g as o,h as l,i as e,j as O,k as n,l as U,m as f,F as P,n as Q,t as g,s as E,b as R}from"./app-D8rmekGi.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-BqQu9rb-.js";import{_ as m}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DpM1i7Lr.js";import{_ as M,a as S,b as N,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Bzgdbpzz.js";import{_ as Z,a as A}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bl1hRZs-.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-Cyvg12s2.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-CO4uJL2l.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-CLP5W6ez.js";import"./useForwardPropsEmits-C5sdgrfY.js";import"./index-DLcJ4uQV.js";import"./useForwardExpose-C5EBM1Mn.js";import"./VisuallyHidden-Bukrfk4b.js";import"./index-DB9KGDEx.js";import"./createLucideIcon-Dxau9BFy.js";const X={class:"flex flex-col gap-6 p-4"},Y={class:"flex items-center justify-between"},h={class:"rounded-md border"},ee={class:"w-full text-sm"},se={class:"px-4 py-2"},ae={class:"px-4 py-2"},oe={class:"px-4 py-2"},te={class:"px-4 py-2"},le={class:"flex flex-wrap gap-2"},re={key:0},ne={class:"grid gap-2"},ie={class:"grid gap-2"},de={key:0,class:"grid gap-2"},ue={key:1,class:"grid gap-2"},me={class:"grid gap-2"},pe={class:"grid gap-2"},ze=K({__name:"Users",props:{users:{}},setup(B){const $=B,j=[{title:"Pouzivatelia",href:"/users"}],c=V(!1),x=V(!1),u=V(null),y=V(null),t=z({name:"",email:"",password:"",password_confirmation:""}),d=z({password:"",password_confirmation:""});function b(){c.value=!1,u.value=null,t.reset(),t.clearErrors()}function D(i){if(!i){b();return}c.value=!0}function H(){u.value=null,t.reset(),t.clearErrors(),c.value=!0}function L(i){u.value=i,t.name=i.name,t.email=i.email,t.password="",t.password_confirmation="",t.clearErrors(),c.value=!0}function T(){if(u.value){t.put(`/users/${u.value.id}`,{onSuccess:b});return}t.post("/users",{onSuccess:b})}function k(){x.value=!1,y.value=null,d.reset(),d.clearErrors()}function q(i){if(!i){k();return}x.value=!0}function G(i){y.value=i,d.reset(),d.clearErrors(),x.value=!0}function I(){y.value&&d.put(`/users/${y.value.id}/password`,{onSuccess:k})}function J(i){R.put(`/users/${i.id}/status`,{active:!i.active},{preserveScroll:!0})}return(i,s)=>(f(),p(P,null,[a(W,{breadcrumbs:j},{default:o(()=>[a(e(O),{title:"Pouzivatelia"}),l("div",X,[l("div",Y,[s[7]||(s[7]=l("h1",{class:"text-2xl font-semibold"},"Pouzivatelia",-1)),a(e(m),{onClick:H},{default:o(()=>[...s[6]||(s[6]=[n("Pridat pouzivatela",-1)])]),_:1})]),l("div",h,[l("table",ee,[s[11]||(s[11]=l("thead",{class:"bg-muted"},[l("tr",null,[l("th",{class:"px-4 py-2 text-left font-medium"}," Meno "),l("th",{class:"px-4 py-2 text-left font-medium"}," Email "),l("th",{class:"px-4 py-2 text-left font-medium"}," Stav "),l("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),l("tbody",null,[(f(!0),p(P,null,Q($.users,r=>(f(),p("tr",{key:r.id,class:"border-t"},[l("td",se,g(r.name),1),l("td",ae,g(r.email),1),l("td",oe,g(r.active?"Aktivny":"Neaktivny"),1),l("td",te,[l("div",le,[a(e(m),{variant:"outline",size:"sm",onClick:C=>L(r)},{default:o(()=>[...s[8]||(s[8]=[n(" Upravit ",-1)])]),_:1},8,["onClick"]),a(e(m),{variant:"outline",size:"sm",onClick:C=>G(r)},{default:o(()=>[...s[9]||(s[9]=[n(" Zmenit heslo ",-1)])]),_:1},8,["onClick"]),a(e(m),{variant:"outline",size:"sm",onClick:C=>J(r)},{default:o(()=>[n(g(r.active?"Deaktivovat":"Aktivovat"),1)]),_:2},1032,["onClick"])])])]))),128)),$.users.length===0?(f(),p("tr",re,[...s[10]||(s[10]=[l("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"4"}," Ziadni pouzivatelia. ",-1)])])):U("",!0)])])])])]),_:1}),a(e(F),{open:c.value,"onUpdate:open":D},{default:o(()=>[a(e(M),{class:"sm:max-w-lg"},{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(N),null,{default:o(()=>[n(g(u.value?"Upravit pouzivatela":"Pridat pouzivatela"),1)]),_:1})]),_:1}),l("form",{class:"space-y-4",onSubmit:E(T,["prevent"])},[l("div",ne,[a(e(_),{for:"user-name"},{default:o(()=>[...s[12]||(s[12]=[n("Meno",-1)])]),_:1}),a(e(w),{id:"user-name",name:"name",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=r=>e(t).name=r),autocomplete:"name"},null,8,["modelValue"]),a(v,{message:e(t).errors.name},null,8,["message"])]),l("div",ie,[a(e(_),{for:"user-email"},{default:o(()=>[...s[13]||(s[13]=[n("Email",-1)])]),_:1}),a(e(w),{id:"user-email",type:"email",name:"email",modelValue:e(t).email,"onUpdate:modelValue":s[1]||(s[1]=r=>e(t).email=r),autocomplete:"email"},null,8,["modelValue"]),a(v,{message:e(t).errors.email},null,8,["message"])]),u.value?U("",!0):(f(),p("div",de,[a(e(_),{for:"user-password"},{default:o(()=>[...s[14]||(s[14]=[n("Heslo",-1)])]),_:1}),a(e(w),{id:"user-password",type:"password",name:"password",modelValue:e(t).password,"onUpdate:modelValue":s[2]||(s[2]=r=>e(t).password=r),autocomplete:"new-password"},null,8,["modelValue"]),a(v,{message:e(t).errors.password},null,8,["message"])])),u.value?U("",!0):(f(),p("div",ue,[a(e(_),{for:"user-password-confirmation"},{default:o(()=>[...s[15]||(s[15]=[n(" Potvrdit heslo ",-1)])]),_:1}),a(e(w),{id:"user-password-confirmation",type:"password",name:"password_confirmation",modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[3]||(s[3]=r=>e(t).password_confirmation=r),autocomplete:"new-password"},null,8,["modelValue"]),a(v,{message:e(t).errors.password_confirmation},null,8,["message"])])),a(e(Z),{class:"gap-2"},{default:o(()=>[a(e(A),{"as-child":""},{default:o(()=>[a(e(m),{type:"button",variant:"outline",onClick:b},{default:o(()=>[...s[16]||(s[16]=[n(" Zrusit ",-1)])]),_:1})]),_:1}),a(e(m),{type:"submit",disabled:e(t).processing},{default:o(()=>[...s[17]||(s[17]=[n(" Ulozit ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),a(e(F),{open:x.value,"onUpdate:open":q},{default:o(()=>[a(e(M),{class:"sm:max-w-lg"},{default:o(()=>[a(e(S),null,{default:o(()=>[a(e(N),null,{default:o(()=>[...s[18]||(s[18]=[n("Zmenit heslo",-1)])]),_:1})]),_:1}),l("form",{class:"space-y-4",onSubmit:E(I,["prevent"])},[l("div",me,[a(e(_),{for:"new-password"},{default:o(()=>[...s[19]||(s[19]=[n("Nove heslo",-1)])]),_:1}),a(e(w),{id:"new-password",type:"password",name:"password",modelValue:e(d).password,"onUpdate:modelValue":s[4]||(s[4]=r=>e(d).password=r),autocomplete:"new-password"},null,8,["modelValue"]),a(v,{message:e(d).errors.password},null,8,["message"])]),l("div",pe,[a(e(_),{for:"new-password-confirmation"},{default:o(()=>[...s[20]||(s[20]=[n(" Potvrdit nove heslo ",-1)])]),_:1}),a(e(w),{id:"new-password-confirmation",type:"password",name:"password_confirmation",modelValue:e(d).password_confirmation,"onUpdate:modelValue":s[5]||(s[5]=r=>e(d).password_confirmation=r),autocomplete:"new-password"},null,8,["modelValue"]),a(v,{message:e(d).errors.password_confirmation},null,8,["message"])]),a(e(Z),{class:"gap-2"},{default:o(()=>[a(e(A),{"as-child":""},{default:o(()=>[a(e(m),{type:"button",variant:"outline",onClick:k},{default:o(()=>[...s[21]||(s[21]=[n(" Zrusit ",-1)])]),_:1})]),_:1}),a(e(m),{type:"submit",disabled:e(d).processing},{default:o(()=>[...s[22]||(s[22]=[n(" Ulozit heslo ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])],64))}});export{ze as default};
