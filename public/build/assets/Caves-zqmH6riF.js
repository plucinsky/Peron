import{d as z,r as b,u as j,e as f,f as a,g as l,h as s,i as e,j as N,k as r,l as S,m as _,F as k,n as E,t as m,s as M,v as F,z as P}from"./app-gvxbI-qR.js";import{_ as c}from"./InputError.vue_vue_type_script_setup_true_lang-DsuSHIY8.js";import{_ as v}from"./index-CRFhrfbN.js";import{_ as B,a as J,b as D,c as T}from"./DialogTitle.vue_vue_type_script_setup_true_lang-COpIkD1s.js";import{_ as Z,a as A}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DC2nHGpr.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-DtDy1Dc-.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-CcxXtsll.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-BqS2gj7J.js";import"./useForwardPropsEmits-CmIdqZXE.js";import"./index-_Siexf_g.js";import"./useForwardExpose-BdnvS-H7.js";import"./VisuallyHidden-DwhrsjEI.js";import"./index-ZplewPxT.js";import"./index-CSEUMRIG.js";import"./createLucideIcon-C9OiHapd.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CP5RVh-J.js";const q={class:"flex flex-col gap-6 p-4"},G={class:"flex items-center justify-between"},H={class:"rounded-md border"},I={class:"w-full text-sm"},K={class:"px-4 py-2"},O={class:"px-4 py-2"},Q={class:"px-4 py-2"},R={class:"px-4 py-2"},W={class:"px-4 py-2"},X={key:0},Y={class:"grid gap-2"},ee={class:"grid gap-2"},te={class:"grid gap-2"},se={class:"grid gap-2"},be=z({__name:"Caves",props:{caves:{}},setup(C){const y=C,h=[{title:"Jaskyne",href:"/caves"}],u=b(!1),d=b(null),o=j({name:"",total_length:"",total_drop:"",description:""});function p(){u.value=!1,d.value=null,o.reset(),o.clearErrors()}function V(i){if(!i){p();return}u.value=!0}function $(){d.value=null,o.reset(),o.clearErrors(),u.value=!0}function w(i){d.value=i,o.name=i.name,o.total_length=String(i.total_length??""),o.total_drop=String(i.total_drop??""),o.description=i.description,o.clearErrors(),u.value=!0}function U(){if(d.value){o.put(`/caves/${d.value.id}`,{onSuccess:p});return}o.post("/caves",{onSuccess:p})}return(i,t)=>(_(),f(k,null,[a(L,{breadcrumbs:h},{default:l(()=>[a(e(N),{title:"Jaskyne"}),s("div",q,[s("div",G,[t[5]||(t[5]=s("h1",{class:"text-2xl font-semibold"},"Jaskyne",-1)),a(e(v),{onClick:$},{default:l(()=>[...t[4]||(t[4]=[r("Pridat jaskynu",-1)])]),_:1})]),s("div",H,[s("table",I,[t[8]||(t[8]=s("thead",{class:"bg-muted"},[s("tr",null,[s("th",{class:"px-4 py-2 text-left font-medium"}," Nazov "),s("th",{class:"px-4 py-2 text-left font-medium"}," Celkova dlzka "),s("th",{class:"px-4 py-2 text-left font-medium"}," Celkove prevysenie "),s("th",{class:"px-4 py-2 text-left font-medium"}," Popis "),s("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),s("tbody",null,[(_(!0),f(k,null,E(y.caves,n=>(_(),f("tr",{key:n.id,class:"border-t"},[s("td",K,m(n.name),1),s("td",O,m(n.total_length),1),s("td",Q,m(n.total_drop),1),s("td",R,m(n.description),1),s("td",W,[a(e(v),{variant:"outline",size:"sm",onClick:oe=>w(n)},{default:l(()=>[...t[6]||(t[6]=[r(" Upravit ",-1)])]),_:1},8,["onClick"])])]))),128)),y.caves.length===0?(_(),f("tr",X,[...t[7]||(t[7]=[s("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"5"}," Ziadne jaskyne. ",-1)])])):S("",!0)])])])])]),_:1}),a(e(T),{open:u.value,"onUpdate:open":V},{default:l(()=>[a(e(B),{class:"sm:max-w-lg"},{default:l(()=>[a(e(J),null,{default:l(()=>[a(e(D),null,{default:l(()=>[r(m(d.value?"Upravit jaskynu":"Pridat jaskynu"),1)]),_:1})]),_:1}),s("form",{class:"space-y-4",onSubmit:M(U,["prevent"])},[s("div",Y,[a(e(g),{for:"cave-name"},{default:l(()=>[...t[9]||(t[9]=[r("Nazov",-1)])]),_:1}),a(e(x),{id:"cave-name",name:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=n=>e(o).name=n),autocomplete:"off"},null,8,["modelValue"]),a(c,{message:e(o).errors.name},null,8,["message"])]),s("div",ee,[a(e(g),{for:"cave-length"},{default:l(()=>[...t[10]||(t[10]=[r("Celkova dlzka",-1)])]),_:1}),a(e(x),{id:"cave-length",name:"total_length",type:"number",min:"0",modelValue:e(o).total_length,"onUpdate:modelValue":t[1]||(t[1]=n=>e(o).total_length=n)},null,8,["modelValue"]),a(c,{message:e(o).errors.total_length},null,8,["message"])]),s("div",te,[a(e(g),{for:"cave-drop"},{default:l(()=>[...t[11]||(t[11]=[r("Celkove prevysenie",-1)])]),_:1}),a(e(x),{id:"cave-drop",name:"total_drop",type:"number",min:"0",modelValue:e(o).total_drop,"onUpdate:modelValue":t[2]||(t[2]=n=>e(o).total_drop=n)},null,8,["modelValue"]),a(c,{message:e(o).errors.total_drop},null,8,["message"])]),s("div",se,[a(e(g),{for:"cave-description"},{default:l(()=>[...t[12]||(t[12]=[r("Popis",-1)])]),_:1}),F(s("textarea",{id:"cave-description",name:"description",rows:"4",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","onUpdate:modelValue":t[3]||(t[3]=n=>e(o).description=n)},null,512),[[P,e(o).description]]),a(c,{message:e(o).errors.description},null,8,["message"])]),a(e(Z),{class:"gap-2"},{default:l(()=>[a(e(A),{"as-child":""},{default:l(()=>[a(e(v),{type:"button",variant:"outline",onClick:p},{default:l(()=>[...t[13]||(t[13]=[r(" Zrusit ",-1)])]),_:1})]),_:1}),a(e(v),{type:"submit",disabled:e(o).processing},{default:l(()=>[...t[14]||(t[14]=[r(" Ulozit ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])],64))}});export{be as default};
