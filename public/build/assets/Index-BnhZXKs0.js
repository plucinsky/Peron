import{d as C,L as F,c as N,A as U,g as i,f as s,h as e,i as l,j as S,K as g,k as n,v as B,e as f,m as p,F as b,n as k,t as m,x as L,l as M,b as j}from"./app-Cdl4WOjK.js";import{_}from"./index-DSwfPsIC.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-CzQSOQe8.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BsDzBuZ1.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-ZBWa5uhK.js";import"./index-B2Tjing9.js";import"./useForwardExpose-Cue5EuLw.js";import"./VisuallyHidden-cO5oM5OC.js";import"./useForwardPropsEmits-C0d-COQa.js";import"./index-CqmfE78h.js";import"./index-CSEUMRIG.js";import"./createLucideIcon-BROPC7wK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bsa9KjqP.js";const A={class:"flex flex-col gap-6 p-4"},E={class:"flex flex-wrap items-center justify-between gap-4"},T={class:"rounded-md border p-4"},Z={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-5"},I={class:"grid gap-2"},K={class:"grid gap-2"},P={class:"grid gap-2"},W=["value"],q={class:"grid gap-2"},G={class:"grid gap-2"},H={class:"mt-4 flex flex-wrap gap-2"},J={class:"rounded-md border"},O={class:"w-full text-sm"},Q={class:"px-4 py-2"},R={class:"px-4 py-2"},X={class:"px-4 py-2"},Y={class:"px-4 py-2"},tt={class:"px-4 py-2"},et={class:"px-4 py-2"},ot={key:0},xt=C({__name:"Index",props:{diaries:{},persons:{},filters:{}},setup(v){const a=v,V=[{title:"Denniky",href:"/denniky"}],r=F({report_number:a.filters.report_number??"",locality_name:a.filters.locality_name??"",leader_person_id:a.filters.leader_person_id??"",date_from:a.filters.date_from??"",date_to:a.filters.date_to??""}),h=N(()=>{const d=new Map;return a.persons.forEach(t=>{d.set(t.id,`${t.first_name} ${t.last_name}`.trim())}),d});function w(d){if(!d)return"-";const[t,o,y]=d.split("-");return!t||!o||!y?d:`${y}.${o}.${t}`}function $(d){return d&&d.trim()!==""?d:"-"}function x(){j.get("/denniky",{...r},{preserveScroll:!0,preserveState:!0,replace:!0})}function D(){r.report_number="",r.locality_name="",r.leader_person_id="",r.date_from="",r.date_to="",x()}return(d,t)=>(p(),U(z,{breadcrumbs:V},{default:i(()=>[s(l(S),{title:"Denniky"}),e("div",A,[e("div",E,[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold"},"Denniky",-1)),s(l(_),{"as-child":""},{default:i(()=>[s(l(g),{href:"/denniky/create"},{default:i(()=>[...t[5]||(t[5]=[n("Vytvorit dennik",-1)])]),_:1})]),_:1})]),e("div",T,[e("div",Z,[e("div",I,[s(l(u),{for:"filter-report-number"},{default:i(()=>[...t[7]||(t[7]=[n("Cislo dennika",-1)])]),_:1}),s(l(c),{id:"filter-report-number",modelValue:r.report_number,"onUpdate:modelValue":t[0]||(t[0]=o=>r.report_number=o),placeholder:"Napr. 2025-01"},null,8,["modelValue"])]),e("div",K,[s(l(u),{for:"filter-locality"},{default:i(()=>[...t[8]||(t[8]=[n("Lokalita",-1)])]),_:1}),s(l(c),{id:"filter-locality",modelValue:r.locality_name,"onUpdate:modelValue":t[1]||(t[1]=o=>r.locality_name=o),placeholder:"Nazov lokality"},null,8,["modelValue"])]),e("div",P,[s(l(u),{for:"filter-leader"},{default:i(()=>[...t[9]||(t[9]=[n("Veduci akcie",-1)])]),_:1}),B(e("select",{id:"filter-leader","onUpdate:modelValue":t[2]||(t[2]=o=>r.leader_person_id=o),class:"h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-xs outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]"},[t[10]||(t[10]=e("option",{value:""},"Vsetci",-1)),(p(!0),f(b,null,k(a.persons,o=>(p(),f("option",{key:o.id,value:String(o.id)},m(o.first_name)+" "+m(o.last_name),9,W))),128))],512),[[L,r.leader_person_id]])]),e("div",q,[s(l(u),{for:"filter-date-from"},{default:i(()=>[...t[11]||(t[11]=[n("Datum od",-1)])]),_:1}),s(l(c),{id:"filter-date-from",type:"date",modelValue:r.date_from,"onUpdate:modelValue":t[3]||(t[3]=o=>r.date_from=o)},null,8,["modelValue"])]),e("div",G,[s(l(u),{for:"filter-date-to"},{default:i(()=>[...t[12]||(t[12]=[n("Datum do",-1)])]),_:1}),s(l(c),{id:"filter-date-to",type:"date",modelValue:r.date_to,"onUpdate:modelValue":t[4]||(t[4]=o=>r.date_to=o)},null,8,["modelValue"])])]),e("div",H,[s(l(_),{onClick:x},{default:i(()=>[...t[13]||(t[13]=[n("Filtrovat",-1)])]),_:1}),s(l(_),{variant:"outline",onClick:D},{default:i(()=>[...t[14]||(t[14]=[n(" Zrusit filtre ",-1)])]),_:1})])]),e("div",J,[e("table",O,[t[17]||(t[17]=e("thead",{class:"bg-muted"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left font-medium"}," Cislo "),e("th",{class:"px-4 py-2 text-left font-medium"}," Lokalita "),e("th",{class:"px-4 py-2 text-left font-medium"}," Datum "),e("th",{class:"px-4 py-2 text-left font-medium"}," Veduci "),e("th",{class:"px-4 py-2 text-left font-medium"}," Pracovna doba "),e("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),e("tbody",null,[(p(!0),f(b,null,k(a.diaries,o=>(p(),f("tr",{key:o.id,class:"border-t"},[e("td",Q,m(o.report_number??"-"),1),e("td",R,m(o.locality_name),1),e("td",X,m(w(o.action_date)),1),e("td",Y,m(o.leader_person_id?h.value.get(o.leader_person_id)??"-":"-"),1),e("td",tt,m($(o.work_time)),1),e("td",et,[s(l(_),{variant:"outline",size:"sm","as-child":""},{default:i(()=>[s(l(g),{href:`/denniky/${o.id}/edit`},{default:i(()=>[...t[15]||(t[15]=[n(" Upravit ",-1)])]),_:1},8,["href"])]),_:2},1024)])]))),128)),a.diaries.length===0?(p(),f("tr",ot,[...t[16]||(t[16]=[e("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"6"}," Ziadne dennicky. ",-1)])])):M("",!0)])])])])]),_:1}))}});export{xt as default};
