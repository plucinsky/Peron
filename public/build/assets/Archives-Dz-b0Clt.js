import{d as Be,r as x,w as ie,c as L,u as de,a as qe,b as k,o as Re,e as u,f as r,g as n,h as t,i as o,j as Te,k as v,l as S,m as d,F as D,n as B,p as Z,q as H,t as c,s as N,v as q,x as Le,y as ue,z as K,A as Ze}from"./app-Bk95154c.js";import{_ as G}from"./InputError.vue_vue_type_script_setup_true_lang-5P5HZ5nF.js";import{_ as m}from"./index-DYA99tft.js";import{_ as J,a as Q,b as W,c as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BocW-sBE.js";import{_ as Y,a as ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CUTusDki.js";import{_ as He}from"./Input.vue_vue_type_script_setup_true_lang-B4Ht5DdO.js";import{_ as te}from"./Label.vue_vue_type_script_setup_true_lang-CvQ5oG3h.js";import{_ as Ke}from"./AppLayout.vue_vue_type_script_setup_true_lang-D3Xo5LXs.js";import{E as Ge,R as Je}from"./refresh-cw-DQDk-MK1.js";import{D as Qe,U as We}from"./upload-CgrdL9jn.js";import{c as fe}from"./createLucideIcon-CIsLTNhn.js";import{L as Xe}from"./loader-circle-tGyXAz3D.js";import"./useForwardPropsEmits-BsGf0zM2.js";import"./index-CVnf4DC8.js";import"./useForwardExpose-DcMm-fVt.js";import"./VisuallyHidden-C8wuC_yQ.js";import"./index-CqmfE78h.js";import"./index-CSEUMRIG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-HFo6xP8k.js";const Ye=fe("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const et=fe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),tt={class:"flex flex-col gap-6 p-4"},st={class:"flex items-center justify-between"},at={class:"flex flex-wrap gap-2"},ot={class:"grid gap-6 lg:grid-cols-[280px_1fr]"},rt={class:"rounded-md border"},lt={class:"divide-y"},nt=["onClick"],it=["onClick"],dt={key:0,class:"px-4 py-6 text-center text-sm text-muted-foreground"},ut={class:"rounded-md border"},vt={class:"flex items-center justify-between border-b px-4 py-2"},pt={class:"text-xs text-muted-foreground"},ct={class:"w-full text-sm"},ft={class:"px-4 py-2"},mt={class:"px-4 py-2"},_t={class:"px-4 py-2"},xt={class:"px-4 py-2 text-sm text-muted-foreground"},gt={class:"inline-flex items-center gap-2"},ht={key:0,class:"inline-flex h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},bt={class:"px-4 py-2 text-sm text-muted-foreground"},yt={class:"inline-flex items-center gap-2"},wt={key:0,class:"inline-flex h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},kt={class:"px-4 py-2"},St=["onClick"],$t=["href"],Ct={key:0},zt={class:"grid gap-2"},Pt={class:"grid gap-2"},jt=["value","disabled"],Mt={class:"grid gap-2"},Dt=["onKeydown"],Nt={class:"flex h-14 w-14 items-center justify-center rounded-full bg-muted-foreground/15 text-foreground"},Ut=["disabled"],At={key:0,class:"text-xs text-destructive"},Vt={key:0,class:"min-h-0 flex-1 overflow-auto rounded-md border"},Et={class:"w-full table-fixed text-xs"},Ft={class:"px-3 py-2"},It={class:"truncate"},Ot={key:0,class:"text-destructive"},Bt={class:"px-3 py-2 text-muted-foreground"},qt={class:"px-3 py-2"},Rt={class:"flex items-center gap-2"},Tt={class:"h-1.5 w-24 rounded-full bg-muted"},Lt={class:"text-muted-foreground"},Zt={class:"flex flex-wrap items-center justify-between gap-2"},Ht={class:"flex max-h-[70vh] flex-col gap-4"},Kt={key:0,class:"text-sm text-muted-foreground"},Gt={key:1,class:"flex min-h-0 flex-1 flex-col gap-4"},Jt={class:"flex flex-wrap items-center gap-2"},Qt={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},Wt={key:0,class:"flex items-center gap-3 text-sm text-muted-foreground"},Xt={key:1,class:"min-h-0 flex-1 overflow-auto"},Yt={class:"flex min-w-full justify-center"},es=["src"],ts={key:2,class:"mt-3 flex flex-wrap items-center justify-between gap-2"},ss={class:"flex items-center gap-2"},as={class:"min-w-[56px] text-center text-xs font-medium text-muted-foreground"},os={class:"text-sm text-muted-foreground"},rs={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},ls={class:"flex flex-wrap items-center justify-between gap-2"},ns={class:"text-xs text-muted-foreground"},is={class:"min-h-0 flex-1 overflow-auto whitespace-pre-wrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs"},ds={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},us={class:"flex flex-wrap items-center justify-between gap-2"},vs={class:"flex flex-wrap gap-2"},ps={key:1},cs={class:"min-h-0 flex-1 overflow-auto rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs"},fs={class:"whitespace-pre-wrap"},ve=.1,pe=.2,ce=2.5,As=Be({__name:"Archives",props:{archives:{},documents:{}},setup(me){const $=me,_e=[{title:"Archiv",href:"/archives"}],f=x(null);ie(()=>{!f.value&&$.archives.length>0&&(f.value=$.archives[0].id)});function xe(a){const e=new Map;a.forEach(y=>{const i=y.parent_id??null;e.has(i)||e.set(i,[]),e.get(i).push(y)});const s=[];function _(y,i){(e.get(y)??[]).forEach(M=>{s.push({archive:M,depth:i}),_(M.id,i+1)})}return _(null,0),s}const se=L(()=>xe($.archives)),ae=L(()=>f.value?$.documents.filter(a=>a.archive_id===f.value):[]);function ge(a){if(!a&&a!==0)return"-";if(a<1024)return`${a} B`;const e=["KB","MB","GB","TB"];let s=a/1024,_=0;for(;s>=1024&&_<e.length-1;)s/=1024,_+=1;const y=s>=10?Math.round(s):Math.round(s*10)/10;return`${String(y).replace(".",",")} ${e[_]}`}const P=x(!1),C=x(null),U=x(!1),A=x(!1),R=x(!1),V=x([]),oe=x(null),p=de({name:"",parent_id:""});function E(){P.value=!1,C.value=null,p.reset(),p.clearErrors()}function he(a){if(!a){E();return}P.value=!0}function re(){U.value=!1,V.value=[],w.reset(),w.clearErrors()}function be(a){if(!a){re();return}U.value=!0}function ye(){C.value=null,p.reset(),p.parent_id=f.value?String(f.value):"",p.clearErrors(),P.value=!0}function we(a){C.value=a,p.name=a.name,p.parent_id=a.parent_id?String(a.parent_id):"",p.clearErrors(),P.value=!0}function ke(){const a={name:p.name,parent_id:p.parent_id?Number(p.parent_id):null};if(C.value){p.put(`/archives/${C.value.id}`,{data:a,onSuccess:E});return}p.post("/archives",{data:a,onSuccess:E})}const w=de({archive_id:"",file:null});function le(a){if(!f.value||a.length===0||R.value)return;const e=new Set($.documents.filter(i=>i.archive_id===f.value).map(i=>`${i.original_filename??i.name}:${i.size??0}`)),s=new Set,_=a.map(i=>{const O=`${i.name}:${i.size}`,M=e.has(O)||s.has(O);return s.add(O),{id:`${i.name}-${i.size}-${i.lastModified}`,name:i.name,size:i.size,progress:0,status:M?"duplicate":"queued",message:M?"Súbor už existuje v tomto adresári.":void 0,file:i}});V.value=_;const y=_.filter(i=>i.status==="queued");y.length!==0&&Se(y)}async function Se(a){R.value=!0;for(const e of a)await $e(e);R.value=!1}function $e(a){return w.clearErrors(),w.archive_id=String(f.value??""),w.file=a.file,a.status="uploading",a.progress=0,new Promise(e=>{w.post("/archive-documents",{forceFormData:!0,onProgress:s=>{a.progress=s.percentage},onSuccess:()=>{a.status="done",a.progress=100},onError:s=>{const _=s.file??s.archive_id??"Nepodarilo sa nahrať súbor.";a.status=_==="Súbor už existuje v tomto adresári."?"duplicate":"error",a.message=_},onFinish:()=>{w.reset("file"),e()}})})}function Ce(a){const e=a.target,s=e.files?Array.from(e.files):[];le(s),e.value=""}function ze(a){a.preventDefault(),A.value=!1;const e=a.dataTransfer?.files?Array.from(a.dataTransfer.files):[];le(e)}function Pe(a){a.preventDefault(),A.value=!0}function je(a){a.preventDefault(),A.value=!1}function T(){f.value&&oe.value?.click()}function Me(a){k.post(`/archive-documents/${a}/ocr`,{},{preserveScroll:!0,onSuccess:()=>{k.reload({only:["documents"],preserveScroll:!0})}})}function De(a){k.post(`/archive-documents/${a}/generate-diary`,{},{preserveScroll:!0})}function Ne(a){j.value.add(a),k.post(`/archive-documents/${a}/process-diary`,{},{preserveScroll:!0,onSuccess:()=>{k.reload({only:["documents"],preserveScroll:!0})},onFinish:()=>{const e=new Set(j.value);e.delete(a),j.value=e}})}function Ue(a){k.post(`/archive-documents/${a}/preview/regenerate`,{},{preserveScroll:!0})}const F=x(!1),l=x(null),h=x(1),b=x(1),g=x("preview"),j=x(new Set);let I=null;const Ae=L(()=>!l.value||l.value.preview_status!=="done"?"":`/archive-documents/${l.value.id}/preview/${h.value}`);function Ve(a){l.value=a,h.value=1,b.value=1,g.value="preview",F.value=!0,a.preview_status!=="done"&&k.post(`/archive-documents/${a.id}/preview`,{},{preserveScroll:!0})}function ne(){F.value=!1,l.value=null,h.value=1,b.value=1,g.value="preview",z()}function Ee(){h.value>1&&(h.value-=1)}function Fe(){const a=l.value?.preview_page_count??0;h.value<a&&(h.value+=1)}function Ie(){b.value=Math.min(ce,+(b.value+ve).toFixed(2))}function Oe(){b.value=Math.max(pe,+(b.value-ve).toFixed(2))}function z(){I&&(clearInterval(I),I=null)}return qe(()=>F.value,a=>{if(!a){z();return}if(!l.value||l.value.preview_status==="done"&&l.value.ocr_status!=="processing"&&l.value.ocr_status!=="queued"){z();return}z(),I=setInterval(()=>{k.reload({only:["documents"],preserveScroll:!0})},3e3)}),ie(()=>{if(!l.value)return;const a=$.documents.find(e=>e.id===l.value?.id);a&&(l.value=a),l.value.preview_status==="done"&&z()}),Re(()=>{z()}),(a,e)=>(d(),u(D,null,[r(Ke,{breadcrumbs:_e},{default:n(()=>[r(o(Te),{title:"Archiv"}),t("div",tt,[t("div",st,[e[13]||(e[13]=t("h1",{class:"text-2xl font-semibold"},"Archiv",-1)),t("div",at,[r(o(m),{variant:"outline",onClick:ye},{default:n(()=>[...e[11]||(e[11]=[v(" Pridať adresár ",-1)])]),_:1}),r(o(m),{disabled:!f.value,onClick:e[0]||(e[0]=s=>U.value=!0)},{default:n(()=>[...e[12]||(e[12]=[v(" Pridať súbory ",-1)])]),_:1},8,["disabled"])])]),t("div",ot,[t("div",rt,[e[14]||(e[14]=t("div",{class:"border-b px-4 py-2 text-sm font-medium"}," Adresáre ",-1)),t("div",lt,[(d(!0),u(D,null,B(se.value,s=>(d(),u("button",{key:s.archive.id,type:"button",class:Z(["flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-accent",f.value===s.archive.id?"bg-accent":""]),onClick:_=>f.value=s.archive.id},[t("span",{class:"truncate",style:H({paddingLeft:`${s.depth*16}px`})},c(s.archive.name),5),t("span",{class:"ml-2 text-xs text-muted-foreground",onClick:N(_=>we(s.archive),["stop"])}," Upraviť ",8,it)],10,nt))),128)),se.value.length===0?(d(),u("div",dt," Žiadne adresáre. ")):S("",!0)])]),t("div",ut,[t("div",vt,[e[15]||(e[15]=t("div",{class:"text-sm font-medium"},"Dokumenty",-1)),t("div",pt,c(f.value?`Adresar #${f.value}`:"Vyber adresár"),1)]),t("table",ct,[e[17]||(e[17]=t("thead",{class:"bg-muted"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left font-medium"}," Názov "),t("th",{class:"px-4 py-2 text-left font-medium"}," Typ "),t("th",{class:"px-4 py-2 text-left font-medium"}," Veľkosť "),t("th",{class:"px-4 py-2 text-left font-medium"}," Náhľad "),t("th",{class:"px-4 py-2 text-left font-medium"}," OCR "),t("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),t("tbody",null,[(d(!0),u(D,null,B(ae.value,s=>(d(),u("tr",{key:s.id,class:"border-t"},[t("td",ft,c(s.name),1),t("td",mt,c(s.type),1),t("td",_t,c(ge(s.size)),1),t("td",xt,[t("span",gt,[s.preview_status==="processing"?(d(),u("span",ht)):S("",!0),v(" "+c(s.preview_status==="done"?"Hotovo":s.preview_status==="processing"?"Generuje sa":s.preview_status==="queued"?"V rade":s.preview_status==="failed"?"Chyba":"Nezadané"),1)])]),t("td",bt,[t("span",yt,[s.ocr_status==="processing"?(d(),u("span",wt)):S("",!0),v(" "+c(s.ocr_status==="done"?"Hotovo":s.ocr_status==="processing"?"Spracúva sa":s.ocr_status==="queued"?"V rade":s.ocr_status==="failed"?"Chyba":"Nezadané"),1)])]),t("td",kt,[t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent p-1 text-muted-foreground transition hover:border-border hover:bg-muted hover:text-foreground","aria-label":"Zobraziť",title:"Zobraziť",onClick:_=>Ve(s)},[r(o(Ge),{class:"h-4 w-4"})],8,St),t("a",{href:`/archive-documents/${s.id}/download`,class:"ml-2 inline-flex items-center justify-center rounded-md border border-transparent p-1 text-muted-foreground transition hover:border-border hover:bg-muted hover:text-foreground","aria-label":"Stiahnuť",title:"Stiahnuť"},[r(o(Qe),{class:"h-4 w-4"})],8,$t)])]))),128)),ae.value.length===0?(d(),u("tr",Ct,[...e[16]||(e[16]=[t("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"6"}," Žiadne dokumenty. ",-1)])])):S("",!0)])])])])])]),_:1}),r(o(X),{open:P.value,"onUpdate:open":he},{default:n(()=>[r(o(J),{class:"sm:max-w-lg"},{default:n(()=>[r(o(Q),null,{default:n(()=>[r(o(W),null,{default:n(()=>[v(c(C.value?"Upraviť adresár":"Pridať adresár"),1)]),_:1})]),_:1}),t("form",{class:"space-y-4",onSubmit:N(ke,["prevent"])},[t("div",zt,[r(o(te),{for:"archive-name"},{default:n(()=>[...e[18]||(e[18]=[v("Názov",-1)])]),_:1}),r(o(He),{id:"archive-name",name:"name",modelValue:o(p).name,"onUpdate:modelValue":e[1]||(e[1]=s=>o(p).name=s),autocomplete:"off"},null,8,["modelValue"]),r(G,{message:o(p).errors.name},null,8,["message"])]),t("div",Pt,[r(o(te),{for:"archive-parent"},{default:n(()=>[...e[19]||(e[19]=[v("Nadradený adresár",-1)])]),_:1}),q(t("select",{id:"archive-parent",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","onUpdate:modelValue":e[2]||(e[2]=s=>o(p).parent_id=s)},[e[20]||(e[20]=t("option",{value:""},"-- koreň --",-1)),(d(!0),u(D,null,B($.archives,s=>(d(),u("option",{key:s.id,value:s.id,disabled:C.value?.id===s.id},c(s.name),9,jt))),128))],512),[[Le,o(p).parent_id]]),r(G,{message:o(p).errors.parent_id},null,8,["message"])]),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:E},{default:n(()=>[...e[21]||(e[21]=[v(" Zrušiť ",-1)])]),_:1})]),_:1}),r(o(m),{type:"submit",disabled:o(p).processing},{default:n(()=>[...e[22]||(e[22]=[v(" Uložiť ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),r(o(X),{open:U.value,"onUpdate:open":be},{default:n(()=>[r(o(J),{class:"sm:max-w-5xl max-h-[85vh] overflow-hidden"},{default:n(()=>[r(o(Q),null,{default:n(()=>[r(o(W),null,{default:n(()=>[...e[23]||(e[23]=[v("Pridať súbory",-1)])]),_:1})]),_:1}),t("form",{class:"flex max-h-[70vh] flex-col gap-4",onSubmit:e[3]||(e[3]=N(()=>{},["prevent"]))},[t("div",Mt,[r(o(te),{for:"archive-upload"},{default:n(()=>[...e[24]||(e[24]=[v("Súbory",-1)])]),_:1}),t("div",{class:Z(["flex cursor-pointer flex-col items-center justify-center gap-3 rounded-md border border-dashed bg-muted/40 p-8 text-sm text-muted-foreground",A.value?"bg-accent":""]),role:"button",tabindex:"0",onClick:T,onKeydown:[ue(N(T,["prevent"]),["enter"]),ue(N(T,["prevent"]),["space"])],onDrop:ze,onDragover:Pe,onDragleave:je},[t("div",Nt,[r(o(We),{class:"h-7 w-7"})]),e[25]||(e[25]=t("div",{class:"text-sm font-medium text-foreground"}," Pretiahni súbory sem alebo klikni sem. ",-1)),t("input",{id:"archive-upload",ref_key:"uploadInputRef",ref:oe,type:"file",class:"hidden",multiple:"",disabled:!f.value,onChange:Ce},null,40,Ut)],42,Dt),f.value?S("",!0):(d(),u("div",At," Najprv vyber adresár. ")),r(G,{message:o(w).errors.file},null,8,["message"])]),V.value.length>0?(d(),u("div",Vt,[t("table",Et,[e[26]||(e[26]=t("thead",{class:"bg-muted"},[t("tr",null,[t("th",{class:"w-1/2 px-3 py-2 text-left font-medium"}," Súbor "),t("th",{class:"w-1/5 px-3 py-2 text-left font-medium"}," Stav "),t("th",{class:"w-1/3 px-3 py-2 text-left font-medium"}," Priebeh ")])],-1)),t("tbody",null,[(d(!0),u(D,null,B(V.value,s=>(d(),u("tr",{key:s.id,class:"border-t"},[t("td",Ft,[t("div",It,c(s.name),1),s.message?(d(),u("div",Ot,c(s.message),1)):S("",!0)]),t("td",Bt,c(s.status==="done"?"Hotovo":s.status==="uploading"?"Nahráva sa":s.status==="duplicate"?"Duplicita":s.status==="error"?"Chyba":"Čaká"),1),t("td",qt,[t("div",Rt,[t("div",Tt,[t("div",{class:Z(["h-1.5 rounded-full transition-all",s.status==="done"?"bg-primary":s.status==="error"?"bg-destructive":s.status==="duplicate"?"bg-muted-foreground":"bg-primary/60"]),style:H({width:s.status==="duplicate"?"100%":`${s.progress}%`})},null,6)]),t("span",Lt,c(s.status==="duplicate"?"100%":`${s.progress}%`),1)])])]))),128))])])])):S("",!0),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:re},{default:n(()=>[...e[27]||(e[27]=[v(" Zrušiť ",-1)])]),_:1})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]),r(o(X),{open:F.value,"onUpdate:open":ne},{default:n(()=>[r(o(J),{class:"sm:max-w-6xl max-h-[85vh] overflow-hidden"},{default:n(()=>[r(o(Q),null,{default:n(()=>[t("div",Zt,[r(o(W),null,{default:n(()=>[...e[28]||(e[28]=[v("Detail dokumentu",-1)])]),_:1}),r(o(m),{type:"button",size:"sm",variant:"outline",disabled:!l.value||l.value.preview_status==="queued"||l.value.preview_status==="processing",onClick:e[4]||(e[4]=s=>l.value&&Ue(l.value.id))},{default:n(()=>[r(o(Je),{class:"mr-2 h-4 w-4"}),e[29]||(e[29]=v(" Pregenerovať náhľad ",-1))]),_:1},8,["disabled"])])]),_:1}),t("div",Ht,[l.value?(d(),u("div",Gt,[t("div",Jt,[r(o(m),{type:"button",size:"sm",variant:g.value==="preview"?"default":"outline",onClick:e[5]||(e[5]=s=>g.value="preview")},{default:n(()=>[...e[30]||(e[30]=[v(" Náhľad ",-1)])]),_:1},8,["variant"]),r(o(m),{type:"button",size:"sm",variant:g.value==="ocr"?"default":"outline",onClick:e[6]||(e[6]=s=>g.value="ocr")},{default:n(()=>[...e[31]||(e[31]=[v(" OCR prepis ",-1)])]),_:1},8,["variant"]),r(o(m),{type:"button",size:"sm",variant:g.value==="processed"?"default":"outline",onClick:e[7]||(e[7]=s=>g.value="processed")},{default:n(()=>[...e[32]||(e[32]=[v(" Spracované údaje ",-1)])]),_:1},8,["variant"])]),q(t("div",Qt,[e[36]||(e[36]=t("div",{class:"mb-3 flex items-center justify-between"},[t("div",{class:"text-sm font-medium"},"Náhľad")],-1)),l.value.preview_status!=="done"?(d(),u("div",Wt,[...e[33]||(e[33]=[t("span",{class:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},null,-1),t("span",null,"Náhľad sa generuje. Skús to o chvíľu znova.",-1)])])):(d(),u("div",Xt,[t("div",Yt,[t("div",{class:"origin-top-left inline-block",style:H({transform:`scale(${b.value})`})},[t("img",{src:Ae.value,alt:"Náhľad dokumentu",class:"w-full max-w-[1000px] rounded-md border"},null,8,es)],4)])])),l.value&&l.value.preview_status==="done"?(d(),u("div",ts,[t("div",ss,[r(o(m),{variant:"outline",size:"icon",disabled:b.value<=pe,onClick:Oe,"aria-label":"Oddialiť",title:"Oddialiť"},{default:n(()=>[r(o(Ye),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t("div",as,c(Math.round(b.value*100))+"% ",1),r(o(m),{variant:"outline",size:"icon",disabled:b.value>=ce,onClick:Ie,"aria-label":"Priblížiť",title:"Priblížiť"},{default:n(()=>[r(o(et),{class:"h-4 w-4"})]),_:1},8,["disabled"])]),r(o(m),{variant:"outline",size:"sm",disabled:h.value<=1,onClick:Ee},{default:n(()=>[...e[34]||(e[34]=[v(" Predchádzajúca ",-1)])]),_:1},8,["disabled"]),t("div",os," Strana "+c(h.value)+" / "+c(l.value.preview_page_count??1),1),r(o(m),{variant:"outline",size:"sm",disabled:h.value>=(l.value.preview_page_count??1),onClick:Fe},{default:n(()=>[...e[35]||(e[35]=[v(" Nasledujúca ",-1)])]),_:1},8,["disabled"])])):S("",!0)],512),[[K,g.value==="preview"]]),q(t("div",rs,[t("div",ls,[e[38]||(e[38]=t("div",{class:"text-sm font-medium"},"OCR prepis",-1)),r(o(m),{type:"button",size:"sm",onClick:e[8]||(e[8]=s=>Me(l.value.id))},{default:n(()=>[...e[37]||(e[37]=[v(" Vygenerovať OCR ",-1)])]),_:1})]),t("div",ns,c(l.value.ocr_status==="done"?"Hotovo":l.value.ocr_status==="processing"?"Spracúva sa":l.value.ocr_status==="queued"?"V rade":l.value.ocr_status==="failed"?"Chyba":"Nezadané"),1),t("div",is,c(l.value.ocr_text||"OCR prepis zatiaľ nie je dostupný."),1)],512),[[K,g.value==="ocr"]]),q(t("div",ds,[t("div",us,[e[40]||(e[40]=t("div",{class:"text-sm font-medium"},"Spracované údaje",-1)),t("div",vs,[r(o(m),{type:"button",size:"sm",onClick:e[9]||(e[9]=s=>Ne(l.value.id)),disabled:!l.value.ocr_text||j.value.has(l.value.id)},{default:n(()=>[j.value.has(l.value.id)?(d(),Ze(o(Xe),{key:0,class:"h-4 w-4 animate-spin"})):(d(),u("span",ps,"Spracovať"))]),_:1},8,["disabled"]),r(o(m),{type:"button",size:"sm",variant:"outline",onClick:e[10]||(e[10]=s=>De(l.value.id)),disabled:!l.value.ocr_text},{default:n(()=>[...e[39]||(e[39]=[v(" Vygenerovať denník ",-1)])]),_:1},8,["disabled"])])]),t("div",cs,[t("pre",fs,""+c(l.value.processed_diary_data?JSON.stringify(l.value.processed_diary_data,null,2):"Spracované údaje zatiaľ nie sú dostupné.")+`
                            `,1)])],512),[[K,g.value==="processed"]])])):(d(),u("div",Kt," Vyber dokument. ")),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:ne},{default:n(()=>[...e[41]||(e[41]=[v(" Zavrieť ",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"])],64))}});export{As as default};
