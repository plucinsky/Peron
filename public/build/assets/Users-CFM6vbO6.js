import{d as K,r as V,u as z,b as p,e as o,f as a,g as l,h as e,i as O,j as n,k as U,l as f,F as P,m as Q,t as g,q as E,B as R}from"./app-CfhKYtt7.js";import{_ as v}from"./InputError.vue_vue_type_script_setup_true_lang-DgiORpTY.js";import{_ as m}from"./index-DGVHeVnd.js";import{_ as M,a as S,b as N,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DRKyjPaX.js";import{_ as Z,a as B}from"./DialogFooter.vue_vue_type_script_setup_true_lang-lkXg9YbF.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-CteKsvKh.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-Cup1MZqB.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-CuPyALle.js";import"./useForwardPropsEmits-BMR9Dotv.js";import"./index-DI3qepia.js";import"./useForwardExpose-iik2X7Kc.js";import"./VisuallyHidden-CsCPmOFa.js";import"./index-CqmfE78h.js";import"./index-CSEUMRIG.js";import"./createLucideIcon-6vwJQ8y7.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CJkCubQI.js";const X={class:"flex flex-col gap-6 p-4"},Y={class:"flex items-center justify-between"},h={class:"rounded-md border"},ee={class:"w-full text-sm"},se={class:"px-4 py-2"},oe={class:"px-4 py-2"},ae={class:"px-4 py-2"},te={class:"px-4 py-2"},le={class:"flex flex-wrap gap-2"},re={key:0},ne={class:"grid gap-2"},ie={class:"grid gap-2"},de={key:0,class:"grid gap-2"},ue={key:1,class:"grid gap-2"},me={class:"grid gap-2"},pe={class:"grid gap-2"},Ee=K({__name:"Users",props:{users:{}},setup(A){const $=A,j=[{title:"Pouzivatelia",href:"/users"}],c=V(!1),x=V(!1),u=V(null),y=V(null),t=z({name:"",email:"",password:"",password_confirmation:""}),d=z({password:"",password_confirmation:""});function b(){c.value=!1,u.value=null,t.reset(),t.clearErrors()}function D(i){if(!i){b();return}c.value=!0}function q(){u.value=null,t.reset(),t.clearErrors(),c.value=!0}function H(i){u.value=i,t.name=i.name,t.email=i.email,t.password="",t.password_confirmation="",t.clearErrors(),c.value=!0}function L(){if(u.value){t.put(`/users/${u.value.id}`,{onSuccess:b});return}t.post("/users",{onSuccess:b})}function k(){x.value=!1,y.value=null,d.reset(),d.clearErrors()}function T(i){if(!i){k();return}x.value=!0}function G(i){y.value=i,d.reset(),d.clearErrors(),x.value=!0}function I(){y.value&&d.put(`/users/${y.value.id}/password`,{onSuccess:k})}function J(i){R.put(`/users/${i.id}/status`,{active:!i.active},{preserveScroll:!0})}return(i,s)=>(f(),p(P,null,[o(W,{breadcrumbs:j},{default:a(()=>[o(e(O),{title:"Pouzivatelia"}),l("div",X,[l("div",Y,[s[7]||(s[7]=l("h1",{class:"text-2xl font-semibold"},"Pouzivatelia",-1)),o(e(m),{onClick:q},{default:a(()=>[...s[6]||(s[6]=[n("Pridat pouzivatela",-1)])]),_:1})]),l("div",h,[l("table",ee,[s[11]||(s[11]=l("thead",{class:"bg-muted"},[l("tr",null,[l("th",{class:"px-4 py-2 text-left font-medium"}," Meno "),l("th",{class:"px-4 py-2 text-left font-medium"}," Email "),l("th",{class:"px-4 py-2 text-left font-medium"}," Stav "),l("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),l("tbody",null,[(f(!0),p(P,null,Q($.users,r=>(f(),p("tr",{key:r.id,class:"border-t"},[l("td",se,g(r.name),1),l("td",oe,g(r.email),1),l("td",ae,g(r.active?"Aktivny":"Neaktivny"),1),l("td",te,[l("div",le,[o(e(m),{variant:"outline",size:"sm",onClick:C=>H(r)},{default:a(()=>[...s[8]||(s[8]=[n(" Upravit ",-1)])]),_:1},8,["onClick"]),o(e(m),{variant:"outline",size:"sm",onClick:C=>G(r)},{default:a(()=>[...s[9]||(s[9]=[n(" Zmenit heslo ",-1)])]),_:1},8,["onClick"]),o(e(m),{variant:"outline",size:"sm",onClick:C=>J(r)},{default:a(()=>[n(g(r.active?"Deaktivovat":"Aktivovat"),1)]),_:2},1032,["onClick"])])])]))),128)),$.users.length===0?(f(),p("tr",re,[...s[10]||(s[10]=[l("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"4"}," Ziadni pouzivatelia. ",-1)])])):U("",!0)])])])])]),_:1}),o(e(F),{open:c.value,"onUpdate:open":D},{default:a(()=>[o(e(M),{class:"sm:max-w-lg"},{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(N),null,{default:a(()=>[n(g(u.value?"Upravit pouzivatela":"Pridat pouzivatela"),1)]),_:1})]),_:1}),l("form",{class:"space-y-4",onSubmit:E(L,["prevent"])},[l("div",ne,[o(e(_),{for:"user-name"},{default:a(()=>[...s[12]||(s[12]=[n("Meno",-1)])]),_:1}),o(e(w),{id:"user-name",name:"name",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=r=>e(t).name=r),autocomplete:"name"},null,8,["modelValue"]),o(v,{message:e(t).errors.name},null,8,["message"])]),l("div",ie,[o(e(_),{for:"user-email"},{default:a(()=>[...s[13]||(s[13]=[n("Email",-1)])]),_:1}),o(e(w),{id:"user-email",type:"email",name:"email",modelValue:e(t).email,"onUpdate:modelValue":s[1]||(s[1]=r=>e(t).email=r),autocomplete:"email"},null,8,["modelValue"]),o(v,{message:e(t).errors.email},null,8,["message"])]),u.value?U("",!0):(f(),p("div",de,[o(e(_),{for:"user-password"},{default:a(()=>[...s[14]||(s[14]=[n("Heslo",-1)])]),_:1}),o(e(w),{id:"user-password",type:"password",name:"password",modelValue:e(t).password,"onUpdate:modelValue":s[2]||(s[2]=r=>e(t).password=r),autocomplete:"new-password"},null,8,["modelValue"]),o(v,{message:e(t).errors.password},null,8,["message"])])),u.value?U("",!0):(f(),p("div",ue,[o(e(_),{for:"user-password-confirmation"},{default:a(()=>[...s[15]||(s[15]=[n(" Potvrdit heslo ",-1)])]),_:1}),o(e(w),{id:"user-password-confirmation",type:"password",name:"password_confirmation",modelValue:e(t).password_confirmation,"onUpdate:modelValue":s[3]||(s[3]=r=>e(t).password_confirmation=r),autocomplete:"new-password"},null,8,["modelValue"]),o(v,{message:e(t).errors.password_confirmation},null,8,["message"])])),o(e(Z),{class:"gap-2"},{default:a(()=>[o(e(B),{"as-child":""},{default:a(()=>[o(e(m),{type:"button",variant:"outline",onClick:b},{default:a(()=>[...s[16]||(s[16]=[n(" Zrusit ",-1)])]),_:1})]),_:1}),o(e(m),{type:"submit",disabled:e(t).processing},{default:a(()=>[...s[17]||(s[17]=[n(" Ulozit ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),o(e(F),{open:x.value,"onUpdate:open":T},{default:a(()=>[o(e(M),{class:"sm:max-w-lg"},{default:a(()=>[o(e(S),null,{default:a(()=>[o(e(N),null,{default:a(()=>[...s[18]||(s[18]=[n("Zmenit heslo",-1)])]),_:1})]),_:1}),l("form",{class:"space-y-4",onSubmit:E(I,["prevent"])},[l("div",me,[o(e(_),{for:"new-password"},{default:a(()=>[...s[19]||(s[19]=[n("Nove heslo",-1)])]),_:1}),o(e(w),{id:"new-password",type:"password",name:"password",modelValue:e(d).password,"onUpdate:modelValue":s[4]||(s[4]=r=>e(d).password=r),autocomplete:"new-password"},null,8,["modelValue"]),o(v,{message:e(d).errors.password},null,8,["message"])]),l("div",pe,[o(e(_),{for:"new-password-confirmation"},{default:a(()=>[...s[20]||(s[20]=[n(" Potvrdit nove heslo ",-1)])]),_:1}),o(e(w),{id:"new-password-confirmation",type:"password",name:"password_confirmation",modelValue:e(d).password_confirmation,"onUpdate:modelValue":s[5]||(s[5]=r=>e(d).password_confirmation=r),autocomplete:"new-password"},null,8,["modelValue"]),o(v,{message:e(d).errors.password_confirmation},null,8,["message"])]),o(e(Z),{class:"gap-2"},{default:a(()=>[o(e(B),{"as-child":""},{default:a(()=>[o(e(m),{type:"button",variant:"outline",onClick:k},{default:a(()=>[...s[21]||(s[21]=[n(" Zrusit ",-1)])]),_:1})]),_:1}),o(e(m),{type:"submit",disabled:e(d).processing},{default:a(()=>[...s[22]||(s[22]=[n(" Ulozit heslo ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])],64))}});export{Ee as default};
