import{d as Oe,r as x,w as ie,c as R,u as de,a as Be,b as C,o as qe,e as u,f as r,g as n,h as t,i as o,j as Te,k as v,l as k,m as d,F as j,n as B,p as Z,q as H,t as c,s as U,v as q,x as Le,y as ue,z as K,A as Re}from"./app-Cdl4WOjK.js";import{_ as G}from"./InputError.vue_vue_type_script_setup_true_lang-PRI2VR5V.js";import{_ as m}from"./index-DSwfPsIC.js";import{_ as J,a as Q,b as W,c as X}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C2AGofqy.js";import{_ as Y,a as ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Dhn2jzem.js";import{_ as Ze}from"./Input.vue_vue_type_script_setup_true_lang-CzQSOQe8.js";import{_ as te}from"./Label.vue_vue_type_script_setup_true_lang-BsDzBuZ1.js";import{_ as He}from"./AppLayout.vue_vue_type_script_setup_true_lang-ZBWa5uhK.js";import{E as Ke}from"./eye-8nIJrd5R.js";import{D as Ge,U as Je}from"./upload-Bt7UpvUc.js";import{c as fe}from"./createLucideIcon-BROPC7wK.js";import{L as Qe}from"./loader-circle-1eM7a6_0.js";import"./useForwardPropsEmits-C0d-COQa.js";import"./index-B2Tjing9.js";import"./useForwardExpose-Cue5EuLw.js";import"./VisuallyHidden-cO5oM5OC.js";import"./index-CqmfE78h.js";import"./index-CSEUMRIG.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bsa9KjqP.js";const We=fe("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const Xe=fe("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ye={class:"flex flex-col gap-6 p-4"},et={class:"flex items-center justify-between"},tt={class:"flex flex-wrap gap-2"},st={class:"grid gap-6 lg:grid-cols-[280px_1fr]"},at={class:"rounded-md border"},ot={class:"divide-y"},rt=["onClick"],nt=["onClick"],lt={key:0,class:"px-4 py-6 text-center text-sm text-muted-foreground"},it={class:"rounded-md border"},dt={class:"flex items-center justify-between border-b px-4 py-2"},ut={class:"text-xs text-muted-foreground"},vt={class:"w-full text-sm"},pt={class:"px-4 py-2"},ct={class:"px-4 py-2"},ft={class:"px-4 py-2"},mt={class:"px-4 py-2 text-sm text-muted-foreground"},_t={class:"inline-flex items-center gap-2"},xt={key:0,class:"inline-flex h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},ht={class:"px-4 py-2 text-sm text-muted-foreground"},gt={class:"inline-flex items-center gap-2"},bt={key:0,class:"inline-flex h-3 w-3 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},yt={class:"px-4 py-2"},wt=["onClick"],kt=["href"],St={key:0},$t={class:"grid gap-2"},Ct={class:"grid gap-2"},zt=["value","disabled"],Mt={class:"grid gap-2"},Pt=["onKeydown"],Dt={class:"flex h-14 w-14 items-center justify-center rounded-full bg-muted-foreground/15 text-foreground"},jt=["disabled"],Ut={key:0,class:"text-xs text-destructive"},Nt={key:0,class:"min-h-0 flex-1 overflow-auto rounded-md border"},At={class:"w-full table-fixed text-xs"},Vt={class:"px-3 py-2"},Et={class:"truncate"},Ft={key:0,class:"text-destructive"},It={class:"px-3 py-2 text-muted-foreground"},Ot={class:"px-3 py-2"},Bt={class:"flex items-center gap-2"},qt={class:"h-1.5 w-24 rounded-full bg-muted"},Tt={class:"text-muted-foreground"},Lt={class:"flex max-h-[70vh] flex-col gap-4"},Rt={key:0,class:"text-sm text-muted-foreground"},Zt={key:1,class:"flex min-h-0 flex-1 flex-col gap-4"},Ht={class:"flex flex-wrap items-center gap-2"},Kt={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},Gt={key:0,class:"flex items-center gap-3 text-sm text-muted-foreground"},Jt={key:1,class:"min-h-0 flex-1 overflow-auto"},Qt=["src"],Wt={key:2,class:"mt-3 flex flex-wrap items-center justify-between gap-2"},Xt={class:"flex items-center gap-2"},Yt={class:"min-w-[56px] text-center text-xs font-medium text-muted-foreground"},es={class:"text-sm text-muted-foreground"},ts={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},ss={class:"flex flex-wrap items-center justify-between gap-2"},as={class:"text-xs text-muted-foreground"},os={class:"min-h-0 flex-1 overflow-auto whitespace-pre-wrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs"},rs={class:"flex min-h-0 flex-col rounded-md border bg-background p-3 h-[70vh] overflow-hidden"},ns={class:"flex flex-wrap items-center justify-between gap-2"},ls={class:"flex flex-wrap gap-2"},is={key:1},ds={class:"min-h-0 flex-1 overflow-auto rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs"},us={class:"whitespace-pre-wrap"},ve=.1,pe=.2,ce=2.5,Ds=Oe({__name:"Archives",props:{archives:{},documents:{}},setup(me){const S=me,_e=[{title:"Archiv",href:"/archives"}],f=x(null);ie(()=>{!f.value&&S.archives.length>0&&(f.value=S.archives[0].id)});function xe(a){const e=new Map;a.forEach(y=>{const i=y.parent_id??null;e.has(i)||e.set(i,[]),e.get(i).push(y)});const s=[];function _(y,i){(e.get(y)??[]).forEach(D=>{s.push({archive:D,depth:i}),_(D.id,i+1)})}return _(null,0),s}const se=R(()=>xe(S.archives)),ae=R(()=>f.value?S.documents.filter(a=>a.archive_id===f.value):[]);function he(a){if(!a&&a!==0)return"-";if(a<1024)return`${a} B`;const e=["KB","MB","GB","TB"];let s=a/1024,_=0;for(;s>=1024&&_<e.length-1;)s/=1024,_+=1;const y=s>=10?Math.round(s):Math.round(s*10)/10;return`${String(y).replace(".",",")} ${e[_]}`}const M=x(!1),$=x(null),N=x(!1),A=x(!1),T=x(!1),V=x([]),oe=x(null),p=de({name:"",parent_id:""});function E(){M.value=!1,$.value=null,p.reset(),p.clearErrors()}function ge(a){if(!a){E();return}M.value=!0}function re(){N.value=!1,V.value=[],w.reset(),w.clearErrors()}function be(a){if(!a){re();return}N.value=!0}function ye(){$.value=null,p.reset(),p.parent_id=f.value?String(f.value):"",p.clearErrors(),M.value=!0}function we(a){$.value=a,p.name=a.name,p.parent_id=a.parent_id?String(a.parent_id):"",p.clearErrors(),M.value=!0}function ke(){const a={name:p.name,parent_id:p.parent_id?Number(p.parent_id):null};if($.value){p.put(`/archives/${$.value.id}`,{data:a,onSuccess:E});return}p.post("/archives",{data:a,onSuccess:E})}const w=de({archive_id:"",file:null});function ne(a){if(!f.value||a.length===0||T.value)return;const e=new Set(S.documents.filter(i=>i.archive_id===f.value).map(i=>`${i.original_filename??i.name}:${i.size??0}`)),s=new Set,_=a.map(i=>{const O=`${i.name}:${i.size}`,D=e.has(O)||s.has(O);return s.add(O),{id:`${i.name}-${i.size}-${i.lastModified}`,name:i.name,size:i.size,progress:0,status:D?"duplicate":"queued",message:D?"Súbor už existuje v tomto adresári.":void 0,file:i}});V.value=_;const y=_.filter(i=>i.status==="queued");y.length!==0&&Se(y)}async function Se(a){T.value=!0;for(const e of a)await $e(e);T.value=!1}function $e(a){return w.clearErrors(),w.archive_id=String(f.value??""),w.file=a.file,a.status="uploading",a.progress=0,new Promise(e=>{w.post("/archive-documents",{forceFormData:!0,onProgress:s=>{a.progress=s.percentage},onSuccess:()=>{a.status="done",a.progress=100},onError:s=>{const _=s.file??s.archive_id??"Nepodarilo sa nahrať súbor.";a.status=_==="Súbor už existuje v tomto adresári."?"duplicate":"error",a.message=_},onFinish:()=>{w.reset("file"),e()}})})}function Ce(a){const e=a.target,s=e.files?Array.from(e.files):[];ne(s),e.value=""}function ze(a){a.preventDefault(),A.value=!1;const e=a.dataTransfer?.files?Array.from(a.dataTransfer.files):[];ne(e)}function Me(a){a.preventDefault(),A.value=!0}function Pe(a){a.preventDefault(),A.value=!1}function L(){f.value&&oe.value?.click()}function De(a){C.post(`/archive-documents/${a}/ocr`,{},{preserveScroll:!0,onSuccess:()=>{C.reload({only:["documents"],preserveScroll:!0})}})}function je(a){C.post(`/archive-documents/${a}/generate-diary`,{},{preserveScroll:!0})}function Ue(a){P.value.add(a),C.post(`/archive-documents/${a}/process-diary`,{},{preserveScroll:!0,onSuccess:()=>{C.reload({only:["documents"],preserveScroll:!0})},onFinish:()=>{const e=new Set(P.value);e.delete(a),P.value=e}})}const F=x(!1),l=x(null),g=x(1),b=x(1),h=x("preview"),P=x(new Set);let I=null;const Ne=R(()=>!l.value||l.value.preview_status!=="done"?"":`/archive-documents/${l.value.id}/preview/${g.value}`);function Ae(a){l.value=a,g.value=1,b.value=1,h.value="preview",F.value=!0,a.preview_status!=="done"&&C.post(`/archive-documents/${a.id}/preview`,{},{preserveScroll:!0})}function le(){F.value=!1,l.value=null,g.value=1,b.value=1,h.value="preview",z()}function Ve(){g.value>1&&(g.value-=1)}function Ee(){const a=l.value?.preview_page_count??0;g.value<a&&(g.value+=1)}function Fe(){b.value=Math.min(ce,+(b.value+ve).toFixed(2))}function Ie(){b.value=Math.max(pe,+(b.value-ve).toFixed(2))}function z(){I&&(clearInterval(I),I=null)}return Be(()=>F.value,a=>{if(!a){z();return}if(!l.value||l.value.preview_status==="done"&&l.value.ocr_status!=="processing"&&l.value.ocr_status!=="queued"){z();return}z(),I=setInterval(()=>{C.reload({only:["documents"],preserveScroll:!0})},3e3)}),ie(()=>{if(!l.value)return;const a=S.documents.find(e=>e.id===l.value?.id);a&&(l.value=a),l.value.preview_status==="done"&&z()}),qe(()=>{z()}),(a,e)=>(d(),u(j,null,[r(He,{breadcrumbs:_e},{default:n(()=>[r(o(Te),{title:"Archiv"}),t("div",Ye,[t("div",et,[e[12]||(e[12]=t("h1",{class:"text-2xl font-semibold"},"Archiv",-1)),t("div",tt,[r(o(m),{variant:"outline",onClick:ye},{default:n(()=>[...e[10]||(e[10]=[v(" Pridať adresár ",-1)])]),_:1}),r(o(m),{disabled:!f.value,onClick:e[0]||(e[0]=s=>N.value=!0)},{default:n(()=>[...e[11]||(e[11]=[v(" Pridať súbory ",-1)])]),_:1},8,["disabled"])])]),t("div",st,[t("div",at,[e[13]||(e[13]=t("div",{class:"border-b px-4 py-2 text-sm font-medium"}," Adresáre ",-1)),t("div",ot,[(d(!0),u(j,null,B(se.value,s=>(d(),u("button",{key:s.archive.id,type:"button",class:Z(["flex w-full items-center justify-between px-4 py-2 text-left text-sm hover:bg-accent",f.value===s.archive.id?"bg-accent":""]),onClick:_=>f.value=s.archive.id},[t("span",{class:"truncate",style:H({paddingLeft:`${s.depth*16}px`})},c(s.archive.name),5),t("span",{class:"ml-2 text-xs text-muted-foreground",onClick:U(_=>we(s.archive),["stop"])}," Upraviť ",8,nt)],10,rt))),128)),se.value.length===0?(d(),u("div",lt," Žiadne adresáre. ")):k("",!0)])]),t("div",it,[t("div",dt,[e[14]||(e[14]=t("div",{class:"text-sm font-medium"},"Dokumenty",-1)),t("div",ut,c(f.value?`Adresar #${f.value}`:"Vyber adresár"),1)]),t("table",vt,[e[16]||(e[16]=t("thead",{class:"bg-muted"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left font-medium"}," Názov "),t("th",{class:"px-4 py-2 text-left font-medium"}," Typ "),t("th",{class:"px-4 py-2 text-left font-medium"}," Veľkosť "),t("th",{class:"px-4 py-2 text-left font-medium"}," Náhľad "),t("th",{class:"px-4 py-2 text-left font-medium"}," OCR "),t("th",{class:"px-4 py-2 text-left font-medium"}," Akcie ")])],-1)),t("tbody",null,[(d(!0),u(j,null,B(ae.value,s=>(d(),u("tr",{key:s.id,class:"border-t"},[t("td",pt,c(s.name),1),t("td",ct,c(s.type),1),t("td",ft,c(he(s.size)),1),t("td",mt,[t("span",_t,[s.preview_status==="processing"?(d(),u("span",xt)):k("",!0),v(" "+c(s.preview_status==="done"?"Hotovo":s.preview_status==="processing"?"Generuje sa":s.preview_status==="queued"?"V rade":s.preview_status==="failed"?"Chyba":"Nezadané"),1)])]),t("td",ht,[t("span",gt,[s.ocr_status==="processing"?(d(),u("span",bt)):k("",!0),v(" "+c(s.ocr_status==="done"?"Hotovo":s.ocr_status==="processing"?"Spracúva sa":s.ocr_status==="queued"?"V rade":s.ocr_status==="failed"?"Chyba":"Nezadané"),1)])]),t("td",yt,[t("button",{type:"button",class:"inline-flex items-center justify-center rounded-md border border-transparent p-1 text-muted-foreground transition hover:border-border hover:bg-muted hover:text-foreground","aria-label":"Zobraziť",title:"Zobraziť",onClick:_=>Ae(s)},[r(o(Ke),{class:"h-4 w-4"})],8,wt),t("a",{href:`/archive-documents/${s.id}/download`,class:"ml-2 inline-flex items-center justify-center rounded-md border border-transparent p-1 text-muted-foreground transition hover:border-border hover:bg-muted hover:text-foreground","aria-label":"Stiahnuť",title:"Stiahnuť"},[r(o(Ge),{class:"h-4 w-4"})],8,kt)])]))),128)),ae.value.length===0?(d(),u("tr",St,[...e[15]||(e[15]=[t("td",{class:"px-4 py-6 text-center text-muted-foreground",colspan:"6"}," Žiadne dokumenty. ",-1)])])):k("",!0)])])])])])]),_:1}),r(o(X),{open:M.value,"onUpdate:open":ge},{default:n(()=>[r(o(J),{class:"sm:max-w-lg"},{default:n(()=>[r(o(Q),null,{default:n(()=>[r(o(W),null,{default:n(()=>[v(c($.value?"Upraviť adresár":"Pridať adresár"),1)]),_:1})]),_:1}),t("form",{class:"space-y-4",onSubmit:U(ke,["prevent"])},[t("div",$t,[r(o(te),{for:"archive-name"},{default:n(()=>[...e[17]||(e[17]=[v("Názov",-1)])]),_:1}),r(o(Ze),{id:"archive-name",name:"name",modelValue:o(p).name,"onUpdate:modelValue":e[1]||(e[1]=s=>o(p).name=s),autocomplete:"off"},null,8,["modelValue"]),r(G,{message:o(p).errors.name},null,8,["message"])]),t("div",Ct,[r(o(te),{for:"archive-parent"},{default:n(()=>[...e[18]||(e[18]=[v("Nadradený adresár",-1)])]),_:1}),q(t("select",{id:"archive-parent",class:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-xs outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","onUpdate:modelValue":e[2]||(e[2]=s=>o(p).parent_id=s)},[e[19]||(e[19]=t("option",{value:""},"-- koreň --",-1)),(d(!0),u(j,null,B(S.archives,s=>(d(),u("option",{key:s.id,value:s.id,disabled:$.value?.id===s.id},c(s.name),9,zt))),128))],512),[[Le,o(p).parent_id]]),r(G,{message:o(p).errors.parent_id},null,8,["message"])]),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:E},{default:n(()=>[...e[20]||(e[20]=[v(" Zrušiť ",-1)])]),_:1})]),_:1}),r(o(m),{type:"submit",disabled:o(p).processing},{default:n(()=>[...e[21]||(e[21]=[v(" Uložiť ",-1)])]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),r(o(X),{open:N.value,"onUpdate:open":be},{default:n(()=>[r(o(J),{class:"sm:max-w-5xl max-h-[85vh] overflow-hidden"},{default:n(()=>[r(o(Q),null,{default:n(()=>[r(o(W),null,{default:n(()=>[...e[22]||(e[22]=[v("Pridať súbory",-1)])]),_:1})]),_:1}),t("form",{class:"flex max-h-[70vh] flex-col gap-4",onSubmit:e[3]||(e[3]=U(()=>{},["prevent"]))},[t("div",Mt,[r(o(te),{for:"archive-upload"},{default:n(()=>[...e[23]||(e[23]=[v("Súbory",-1)])]),_:1}),t("div",{class:Z(["flex cursor-pointer flex-col items-center justify-center gap-3 rounded-md border border-dashed bg-muted/40 p-8 text-sm text-muted-foreground",A.value?"bg-accent":""]),role:"button",tabindex:"0",onClick:L,onKeydown:[ue(U(L,["prevent"]),["enter"]),ue(U(L,["prevent"]),["space"])],onDrop:ze,onDragover:Me,onDragleave:Pe},[t("div",Dt,[r(o(Je),{class:"h-7 w-7"})]),e[24]||(e[24]=t("div",{class:"text-sm font-medium text-foreground"}," Pretiahni súbory sem alebo klikni sem. ",-1)),t("input",{id:"archive-upload",ref_key:"uploadInputRef",ref:oe,type:"file",class:"hidden",multiple:"",disabled:!f.value,onChange:Ce},null,40,jt)],42,Pt),f.value?k("",!0):(d(),u("div",Ut," Najprv vyber adresár. ")),r(G,{message:o(w).errors.file},null,8,["message"])]),V.value.length>0?(d(),u("div",Nt,[t("table",At,[e[25]||(e[25]=t("thead",{class:"bg-muted"},[t("tr",null,[t("th",{class:"w-1/2 px-3 py-2 text-left font-medium"}," Súbor "),t("th",{class:"w-1/5 px-3 py-2 text-left font-medium"}," Stav "),t("th",{class:"w-1/3 px-3 py-2 text-left font-medium"}," Priebeh ")])],-1)),t("tbody",null,[(d(!0),u(j,null,B(V.value,s=>(d(),u("tr",{key:s.id,class:"border-t"},[t("td",Vt,[t("div",Et,c(s.name),1),s.message?(d(),u("div",Ft,c(s.message),1)):k("",!0)]),t("td",It,c(s.status==="done"?"Hotovo":s.status==="uploading"?"Nahráva sa":s.status==="duplicate"?"Duplicita":s.status==="error"?"Chyba":"Čaká"),1),t("td",Ot,[t("div",Bt,[t("div",qt,[t("div",{class:Z(["h-1.5 rounded-full transition-all",s.status==="done"?"bg-primary":s.status==="error"?"bg-destructive":s.status==="duplicate"?"bg-muted-foreground":"bg-primary/60"]),style:H({width:s.status==="duplicate"?"100%":`${s.progress}%`})},null,6)]),t("span",Tt,c(s.status==="duplicate"?"100%":`${s.progress}%`),1)])])]))),128))])])])):k("",!0),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:re},{default:n(()=>[...e[26]||(e[26]=[v(" Zrušiť ",-1)])]),_:1})]),_:1})]),_:1})],32)]),_:1})]),_:1},8,["open"]),r(o(X),{open:F.value,"onUpdate:open":le},{default:n(()=>[r(o(J),{class:"sm:max-w-6xl max-h-[85vh] overflow-hidden"},{default:n(()=>[r(o(Q),null,{default:n(()=>[r(o(W),null,{default:n(()=>[...e[27]||(e[27]=[v("Detail dokumentu",-1)])]),_:1})]),_:1}),t("div",Lt,[l.value?(d(),u("div",Zt,[t("div",Ht,[r(o(m),{type:"button",size:"sm",variant:h.value==="preview"?"default":"outline",onClick:e[4]||(e[4]=s=>h.value="preview")},{default:n(()=>[...e[28]||(e[28]=[v(" Náhľad ",-1)])]),_:1},8,["variant"]),r(o(m),{type:"button",size:"sm",variant:h.value==="ocr"?"default":"outline",onClick:e[5]||(e[5]=s=>h.value="ocr")},{default:n(()=>[...e[29]||(e[29]=[v(" OCR prepis ",-1)])]),_:1},8,["variant"]),r(o(m),{type:"button",size:"sm",variant:h.value==="processed"?"default":"outline",onClick:e[6]||(e[6]=s=>h.value="processed")},{default:n(()=>[...e[30]||(e[30]=[v(" Spracované údaje ",-1)])]),_:1},8,["variant"])]),q(t("div",Kt,[l.value.preview_status!=="done"?(d(),u("div",Gt,[...e[31]||(e[31]=[t("span",{class:"inline-flex h-4 w-4 animate-spin rounded-full border-2 border-muted-foreground/40 border-t-muted-foreground"},null,-1),t("span",null,"Náhľad sa generuje. Skús to o chvíľu znova.",-1)])])):(d(),u("div",Jt,[t("div",{class:"origin-top-left inline-block",style:H({transform:`scale(${b.value})`})},[t("img",{src:Ne.value,alt:"Náhľad dokumentu",class:"max-w-none rounded-md border"},null,8,Qt)],4)])),l.value&&l.value.preview_status==="done"?(d(),u("div",Wt,[t("div",Xt,[r(o(m),{variant:"outline",size:"icon",disabled:b.value<=pe,onClick:Ie,"aria-label":"Oddialiť",title:"Oddialiť"},{default:n(()=>[r(o(We),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t("div",Yt,c(Math.round(b.value*100))+"% ",1),r(o(m),{variant:"outline",size:"icon",disabled:b.value>=ce,onClick:Fe,"aria-label":"Priblížiť",title:"Priblížiť"},{default:n(()=>[r(o(Xe),{class:"h-4 w-4"})]),_:1},8,["disabled"])]),r(o(m),{variant:"outline",size:"sm",disabled:g.value<=1,onClick:Ve},{default:n(()=>[...e[32]||(e[32]=[v(" Predchádzajúca ",-1)])]),_:1},8,["disabled"]),t("div",es," Strana "+c(g.value)+" / "+c(l.value.preview_page_count??1),1),r(o(m),{variant:"outline",size:"sm",disabled:g.value>=(l.value.preview_page_count??1),onClick:Ee},{default:n(()=>[...e[33]||(e[33]=[v(" Nasledujúca ",-1)])]),_:1},8,["disabled"])])):k("",!0)],512),[[K,h.value==="preview"]]),q(t("div",ts,[t("div",ss,[e[35]||(e[35]=t("div",{class:"text-sm font-medium"},"OCR prepis",-1)),r(o(m),{type:"button",size:"sm",onClick:e[7]||(e[7]=s=>De(l.value.id))},{default:n(()=>[...e[34]||(e[34]=[v(" Vygenerovať OCR ",-1)])]),_:1})]),t("div",as,c(l.value.ocr_status==="done"?"Hotovo":l.value.ocr_status==="processing"?"Spracúva sa":l.value.ocr_status==="queued"?"V rade":l.value.ocr_status==="failed"?"Chyba":"Nezadané"),1),t("div",os,c(l.value.ocr_text||"OCR prepis zatiaľ nie je dostupný."),1)],512),[[K,h.value==="ocr"]]),q(t("div",rs,[t("div",ns,[e[37]||(e[37]=t("div",{class:"text-sm font-medium"},"Spracované údaje",-1)),t("div",ls,[r(o(m),{type:"button",size:"sm",onClick:e[8]||(e[8]=s=>Ue(l.value.id)),disabled:!l.value.ocr_text||P.value.has(l.value.id)},{default:n(()=>[P.value.has(l.value.id)?(d(),Re(o(Qe),{key:0,class:"h-4 w-4 animate-spin"})):(d(),u("span",is,"Spracovať"))]),_:1},8,["disabled"]),r(o(m),{type:"button",size:"sm",variant:"outline",onClick:e[9]||(e[9]=s=>je(l.value.id)),disabled:!l.value.ocr_text},{default:n(()=>[...e[36]||(e[36]=[v(" Vygenerovať denník ",-1)])]),_:1},8,["disabled"])])]),t("div",ds,[t("pre",us,""+c(l.value.processed_diary_data?JSON.stringify(l.value.processed_diary_data,null,2):"Spracované údaje zatiaľ nie sú dostupné.")+`
                            `,1)])],512),[[K,h.value==="processed"]])])):(d(),u("div",Rt," Vyber dokument. ")),r(o(Y),{class:"gap-2"},{default:n(()=>[r(o(ee),{"as-child":""},{default:n(()=>[r(o(m),{type:"button",variant:"outline",onClick:le},{default:n(()=>[...e[38]||(e[38]=[v(" Zavrieť ",-1)])]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["open"])],64))}});export{Ds as default};
